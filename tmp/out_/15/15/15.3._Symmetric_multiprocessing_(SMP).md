## 15.3 対称型マルチプロセッシング（SMP）

最近の2D DCMのリリースでは、複数のプロセッサコアを持つコンピュータを活用するためのさまざまな開発が行われています。
2D DCMはスレッドセーフであり、異なるインスタンスの2D DCMを使用して異なるプロセッサで同時に計算を実行することができます。

2D DCMは、特定のタイプの計算と十分な複雑さが必要な場合に複数のプロセッサを使用する能力も持っており、計算をさらに高速化します。これは、独立した個々のDCMタスクのシリーズを作成することによって行われます。各タスクは、要求された計算の一部を表します。これらのタスクのリストは、Frustum関数を介してアプリケーションに渡されます。アプリケーションは、任意の並列化技術（例：OpenMP）を使用してこれらのタスクを開始する必要があります。

このリリースでは、デフォルトでは、2D DCMがこのように小さなタスクに分割する計算は、DCM\_CURVE\_LENGTHタイプの寸法によって引き起こされます。
このように分割することで利益がある程度の大きさの曲線長計算の場合にのみ行われます。
計算がこのように複雑になるのは正確に予測することは難しいですが、これは20個以上の制御点を持つ2D DCMスプラインにこの寸法が適用された場合です。
この機能は、set\_optionを使用して無効にすることができます。キーはDCM\_OPKEY\_MULTITHREAD\_CURVELENGTHです。

DCMは、モデル内の別々のパーティションを独立して解決しようとすることもできます。これはデフォルトでは有効になっていませんが、特定のset\_optionキー（DCM\_OPKEY\_MULTITHREAD\_PARTITIONS\_MODE）を使用して有効にすることができます。このキーには2つの並列化モードがあります。デバッグ用の並列スレッドを最大化するモードと、不要な小さなワークロードがタスクとして出力されるのを避けるためにワークロードを最適化するモードです。

並列アルゴリズムが利用可能な場合、2D DCMは計算の一部を表す独立した個々のタスクのシリーズを作成します。これらのタスクは、他のFrustum関数と同様に登録する必要があるFrustum関数DCM\_run\_multiple\_tasks()を使用してアプリケーションに渡されます。この関数が登録されていない場合、2D DCMはタスクを単一のスレッドで実行します。

その後、アプリケーションは、インターフェース関数run\_single\_task()を呼び出すことで、各タスクを実行することが期待されます。DCM\_run\_multiple\_tasks内から他のDCM関数を呼び出すことは推奨されません。

すべての並列機能を有効にすると、DCMは特定のrun\_single\_taskコマンドの実行中にrun\_multiple\_tasksを追加で呼び出す可能性があります。
これは、パーティション化されたモデルに大きな曲線長計算が含まれる場合、現在のバージョンでは起こります。
オプションを使用して、同時に限定された並列化方法のみを選択することで、これを防ぐことができます。

DCM関数：[run\_single\_task](16.15._Miscellaneous_functions.md)

Frustum関数：[DCM\_run\_multiple\_tasks](17.12._Miscellaneous_functions.md)
