## 2.3 自由度

モデルは、図形と変数からなるDCMで構成され、これらの自由度は制約と方程式によって削除されます。
制約バランスは、これらを関連付ける方程式です。
ゼロの制約バランスは、モデルの図形が完全に定義されていることを示します。

制約バランス = 図形と変数によって導入される自由度

- 制約によって削除される自由度

- システムの剛体自由度

以下のセクションでは、これらの用語の詳細を説明します。

制約バランスがゼロのモデルは、図形の初期位置が与えられた場合に、明確な解を持ちます。
したがって、アプリケーションでは、エンドユーザーが作成するデザインが曖昧でないように、ゼロの制約バランスを目指すことがよくあります。
非剛体の寸法と論理的な制約のみで定義されたモデルは、パラメトリックな設計として使用することができます。ここでは、任意の寸法値が設計の変更可能なパラメータとなり、異なるバリエーションの設計を生成するために、さまざまな値で解決可能です。これには適切なオプションを持つ方程式を含めることもできます。

他のユースケースでは、アプリケーションは非常に拘束不足のモデルで作業しており、システムの自由度が非常に高いです。
そのような場合、DCMは解決の振る舞いに影響を与えるための多くの方法を提供します。
アプリケーション統合者は、これらの場合にアプリケーションの振る舞いを調整するために異なるオプションを選択することができます。

### 2.3.1 図形と変数の自由度

一般的に、2次元ユークリッド空間の任意の図形や剛体セットは、3つの自由度（2つの平行移動と1つの回転）を持っています。ただし、図形が持つ平行移動対称性と回転対称性の数を引き、さらに内部の自由度を加えます。
したがって：

自由度 = 3 \- （平行移動 + 回転対称性）+ 内部の自由度

この式を使うと、以下のことがわかります：

- 点と直線は2つの自由度を持ちます。
- 円は3つの自由度を持ちます。
- 楕円は5つの自由度を持ちます。
- DCMが制御できる内部の自由度を持たないパラメトリック曲線は3つの自由度を持ちます。
- セットは、含まれる図形の数に関係なく、合計で3つの自由度を持ちます。
- スケーラブルなバイスケーラブルなセットは、含まれる図形によって自由度が決まります。
- スプラインの自由度は、曲線を定義するために使用される図形の合計自由度です。したがって、n個の点で定義されたスプラインは2n個の自由度を持ちます。
- 円錐曲線は7つの自由度を持ちます。

固定された図形や凍結された図形はDCMによって移動されることはありませんし、自由度もありません。
ロックされた図形は、ロック制約によって一部またはすべての自由度が削除されます。

図形のすべての自由度が寸法と固定された図形の一貫した組み合わせによって占有された場合、その図形はよく定義されていると言います。
自由度をまだ持つ図形は未定義と言います。

セットは固定または凍結することができます。これにより、すべての自由度が占有されます。
セット内の個々の図形は固定することができます。
たとえば、セットに固定された直線が含まれている場合、セットは直線の方向に沿って1つの自由度を持ちます。
この自由度は、セット内の他の図形を固定することで削除することができます。

変数（変数寸法または単純な変数）は1つの自由度を持ちます。

### 2.3.2 拘束と方程式によって削除される自由度

図形の集合が完全に指定されるためには、そのすべての自由度が寸法によって占有されなければなりません。
ほとんどの寸法は1つの自由度を占有しますが、特殊な場合もあります。
2つの直線間の距離寸法は平行性と距離の両方を指定するため、2つの自由度を占有します。
2つの点間の一致拘束も2つの自由度を占有し、同心拘束も同様です。
対称拘束と一致拘束は、点と直線では2つの自由度、円では3つの自由度、楕円では5つの自由度を占有します。

DCMには、過剰に指定された論理的な拘束に対する特別な処理が含まれています。
これは重要です、なぜなら設計が対話的に構築される際には、平行性などの論理的な拘束が過剰に指定される可能性があるからです。
例えば、2つの直線が平行であると定義され、その後にそれらの間に距離が与えられると、平行性は2回指定されます。
DCMがこれらの構成をどのように処理するかについては、後のセクション[2.7 過剰定義モデルの解決](2.7._Solving_over-defined_models.md)で説明されています。

方程式は1つの自由度を削除します。
不等式はアクティブまたはパッシブのいずれかであり、変数をその範囲に持ってくるために使用する必要があるかどうかによって異なります。
ただし、不等式がアクティブであっても、それは図形の自由度の数を減らしません。

### 2.3.3 剛体の自由度

すべての図形が自由な図形に対して正確に定義されている場合でも、剛体の運動（平面内の移動と回転）により、3つの自由度が残ります。各接続された図形のセットが完全に定義されるためには、少なくとも3つの自由度を占有する固定された図形に寸法を与える必要があります。
そのため、すべてのモデルにいくつかの固定された図形があることが望ましい場合があります。
ただし、このように作業する必要はありません。
DCMを使用して、図形を完全に相対的に指定することもできます。

### 2.3.4 拘束バランスの使用

アプリケーションは、DCMを使用して、図形と変数の総自由度、寸法と方程式によって占有される自由度の数、および残りの剛体自由度の数を求めることができます。
これらの数値は、DCMのconstraint_balance関数を呼び出すことで見つけることができます。
これらは、モデル内のすべての図形の自由度を除去するために十分な寸法が存在するかどうかを示すために使用することができます。

なお、constraint_balanceの結果は、一部の場合においてDCMの個々の図形と変数の状態と矛盾する結果を示す場合があります。

constraint_balanceは、次の場合にモデル内の自由度が予想よりも少なく報告する場合があります。

- 冗長/過拘束モデルでは、特定の同等の拘束が完全な評価が行われるまで特定されない場合があります。

正確な結果が必要な場合は、constraint_balanceの前にevaluateを呼び出すことが推奨されます。
2D DCMは、evaluateを行わずにもconstraint_balanceで大部分の過拘束制約を特定し処理しますが、一部のケースではevaluate関数の完全な負荷が必要です。

dynamic_evaluate関数は、完全に正確なconstraint_balance関数に必要な情報を提供しません。

- 寸法値、または複数の値が関与する特異構成です。
セクション[2.6.3 特異構成と拘束バランス](2.6._Ambiguous_models.md)を参照してください。

この場合、ジオメトリは不完全に定義されているように見えますが、既に適用された拘束の数が正確な寸法値で競合しているため、完全に定義することはできません。
この場合、アプリケーションは、ジオメトリを完全に定義するために、一部の寸法を削除してから異なる拘束を追加する必要があります。

constraint_balanceは、次の場合にモデル内の自由度が予想よりも多く報告する場合があります。

- 特異な寸法値が使用される場合、例えば2つの点間の距離がゼロの場合は2つの自由度が削除され、他の値では1つの自由度が削除されます。
constraint_balanceは寸法の値を考慮しないため、この特殊なケースを特定することはありません。

これにより、モデルがモデル内に自由度が残っているはずであると報告することがありますが、v_nodesまたはg_nodesが不完全に定義されていない場合があります。
この場合、2つの点間の距離がゼロの例であるように、寸法を同等の論理的な拘束（例えば一致拘束）で置き換えることができる可能性が高いです。
