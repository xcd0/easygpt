## 2.6 曖昧なモデル

幾何学と拘束条件の一部の組み合わせによっては、解決が曖昧なモデルが生じることがあります。
最も一般的なものについて、このセクションで説明します。

### 2.6.1 特異な寸法設定

特異な寸法設定とは、現在のシステム内の寸法の値によって、図形の位置が何らかの特別な状態になるものです。
通常、システム内の図形の自由度が、1つ以上の寸法の値が変更されると変化することを意味します。

特異な寸法設定は、既存の寸法や拘束を削除せずにシステムの自由度を完全に取り除くことが困難または不可能になるため、避けるべきです。
特異な寸法設定では、システム内の各パラメータ値の変動に対してモデルを簡単に解くことができません（値を持つ寸法）。
なぜなら、解はいくつかの値が同じ比率（通常は等号）を持つことに依存しているからです。

特異性の度合いは、モデル内の特異な寸法設定の数です。
この値を計算し、特異性に寄与している拘束（d\_nodes、r\_nodes、e\_nodes）を特定するためのDCM関数が提供されています。
特異性の度合いを計算することは、パフォーマンスの観点から非常にコストがかかる場合があるため、アプリケーションはモデルが病的であることがわかっている場合にのみそれに頼るべきです。
たとえば、拘束バランスがゼロであるが、一部の図形がまだ未定義の場合などです。

![](../Resources/Images/2ddcm_manual/Ambiguous models.jpg)

図6. 特異な未定義の構成の例

特定の値が割り当てられた場合、複数の寸法が実質的に同じ自由度に作用するようなこのような構成の典型的な例は、[図6. 特異な未定義の構成の例](#_Ref497313057)に示されています。この場合、モデルの図形は円とそれに一致する2つの点で構成されています。
2つの点の間に距離寸法を設定し、円の半径を設定すると、これら3つの図形のすべての自由度が除去されるはずです（すべての図形の剛体変換を除く）。しかし、距離の値を円の直径と等しく設定すると、点の位置はまだ円に対して未定義のままです。
[図6. 特異な未定義の構成の例](#_Ref497313057)のモデルの特異性の度合いは1であり、複数の寸法が作用する自由度が1つあります。

DCM関数：[degree\_of\_singularity](16.5._Enquiry_functions.md)

### 2.6.2 特異な拘束不足

一般的に、図形が十分な拘束を受けていて、その図形の自由度をすべて取り除くことができる場合、図形は適切に定義されます。
例えば、直線は2つの自由度（1つの角度と1つの位置）を持っているため、2つの固定された（または適切に定義された）点に拘束されると、適切に定義されます。なぜなら、各拘束は1つの自由度を取り除くからです。

しかし、次元の値や図形の形状によって、図形の自由度を取り除くための十分な拘束があるにもかかわらず、実際には拘束不足の状態になることがあります。
これが発生すると、追加の拘束を追加しても、図形の残りの自由度を通常は取り除くことはできません。これにより、過拘束モデルが生じることがよくあります。

このような図形は特異な拘束不足と呼ばれます。
これは、次元の値の特別な組み合わせ（またはパラメトリックな図形の形状、または凍結された図形の位置）によって、拘束不足の状態になることを意味します。これにもかかわらず、それ以上の拘束を追加することはできません。

論理的な拘束（値なし）の場合、DCMは、複数のこのような拘束が図形の同じ自由度に作用する場合、これらの冗長なケースを識別し、一貫性がある場合に処理することができます。
したがって、論理的な拘束だけでは一般的に特異な拘束不足の図形にはなりません。

しかし、次元の場合、特定の次元の値が、2つ以上の拘束が図形の同じ自由度に作用するようにし、それによって特異な拘束不足の状態になることがあります。
このようなモデルでは、次元の値が変更されると、図形は適切に定義されるようになります。

特異な拘束不足の図形に追加の拘束が適用されると、DCMは通常、モデルを過拘束として識別します。なぜなら、DCMはモデルに対して解を見つけることができるのは、次元が独立して変化できる場合であり、ほとんどの特異なモデルではこれが不可能だからです。

DCM関数: [underdefined\_status](16.5._Enquiry_functions.md)

Frustum関数: [DCM\_new\_underdefined\_status](17.3._Functions_for_outputting_change_information.md)

#### 2.6.2.1 例1 - 寸法値による特異構成の発生

特異な未定義の図形が発生する最も一般的な原因は、値を持つ寸法が、その関係を表す論理的な拘束を持たないまま図形を一致させることです。
これは、モデルに2つの等しい寸法値が含まれる場合によく起こります。

これの簡単な例として、2つの点に一致する直線があるとします。それぞれの点は、独立した寸法によって固定された直交軸に配置されています。
一般的に、このようなモデルは適切に定義されています。
直線の2つの自由度は、2つの点への2つの拘束によって除去されます。
各点の2つの自由度は、固定された直線への2つの寸法によって除去されます。

しかし、もし寸法値が等しい場合、つまり点の位置が同じに計算される場合、直線の位置は未定義になります：それは両方の点が位置する場所を通過する必要がありますが、その点を中心に回転することができます。

したがって、拘束のバランスはゼロになります：図形によって定義される6つの自由度、拘束によって除去される6つの自由度、剛体の自由度は残りません。
しかし、直線の状態は未定義になります。

この状況では、追加の拘束を追加してモデルから残りの自由度を除去することはできません。
代わりに、他の拘束の1つを置き換えるか、寸法値を変更する必要があります。

#### 2.6.2.2 例2 - パラメトリック形状に起因する特異構成

図形がパラメトリック曲線に制約されている場合、特異構成が生じることがあります。
特に、パラメトリック図形に曲率ゼロの領域がある場合、モデルの状態は、他の寸法（例：距離）によってこれらの位置で図形の制約が解決する必要がある場合に異なる場合があります。

したがって、パラメトリックに接する円が、それに作用する距離のほとんどの値に対して明確に定義されているかもしれませんが、距離が接触を解決するためにそのパラメトリックの線形領域上で強制される場合、未定義の状態になる可能性があります。

パラメトリック曲線形状から生じる特異な未定義の図形に対しては、既存の寸法が変更されないと仮定して、さらなる寸法の追加によって残りの自由度を通常除去することができます。

### 2.6.3 特異構成と拘束バランス

DCMは、図形と拘束のシステムの全体的な拘束バランスを報告することができます。
これは、システムを完全に定義するために必要な追加の拘束の数を示すために使用することができます。

ジオメトリが特異的に未定義の場合、モデルはグローバルな拘束バランスと個々のジオメトリの状態との間で競合が発生します。なぜなら、拘束バランスにカウントされる特定の拘束は実際には効果を持たないからです。

論理的な拘束によって過拘束となっているモデルは、この効果を持ちません。なぜなら、DCMは冗長性を認識し、これらをモデルで作用する拘束の数から除外するからです。

### 2.6.4 ゼロダイヤモンド

ゼロダイヤモンドの最も単純な例は、2つの点、2つの線、および4つの一致する拘束条件を持つモデルです。
各点は2つの線に一致する拘束条件を持ち、他の拘束条件はありません。
このモデルは、[図7：ゼロダイヤモンドの例](#_Ref359939762)(a)に示されており、2つの可能な解釈があります。

- 点は一致しており、両方の線がそれらを通過しています。
線の間の角度は制御されていません。
これは、[図7：ゼロダイヤモンドの例](#_Ref359939762)(b)に示されています。
- 線は一致しているとされています。
2つの点はそれらに沿ってどこにでも配置できます。
これは、[図7：ゼロダイヤモンドの例](#_Ref359939762)(c)に示されています。

![fig6_zero_diamond.bmp](../Resources/Images/2ddcm_manual/Ambiguous models.png)

図7：ゼロダイヤモンドの例

モデルに等価な点と線の構成が含まれている場合、DCMは上記の解決策のいずれかを意味する拘束をチェックします。
見つからない場合、DCMはアプリケーションに意図を尋ねます。
アプリケーションは、点を一致させる、線を一致させる、またはDCMが組み込みのデフォルトを使用するようにDCMに通知することができます。

DCMのデフォルトの動作は、評価の開始時に線の間の角度を測定して、どの構成が意図されているかを決定することです。
これが45°未満の場合、DCMは線を同一にすると仮定します。
それ以外の場合、点を同一にすると仮定します。

アプリケーションがどのペアの図形が同一であるかを指定する拘束を適用する場合、DCMは線の間の角度に関係なくこれを使用します。
予期しない結果を避けるために、アプリケーションはこれを行うことが推奨されます。
図形に拘束を適用することは、DCMのパフォーマンスも向上させます。

アプリケーションは通常、DCMよりも図形に関するより多くの情報を利用できるため、曖昧さを解決するためのより良い判断を下すことができます。
2つの例は次のとおりです。

渡された2つの点は、アプリケーションのエッジの端点です。
この場合、アプリケーションは通常、ゼロ長さのエッジを作成しないために線を一致させたいと考えるでしょう。
渡された2つの点は最初は図形が同一であり、同じエッジの端点ではありません。
この場合、線の間の角度に関係なく、点を一致させることがより適切かもしれません。

フラスタム関数：[DCM\_resolve\_zero\_diamond](17.12._Miscellaneous_functions.md)
