## 16.12 寸法の事前評価チェック

以下の関数は、モデルを過剰に定義することなく、寸法をモデルに適用できるかどうかをアプリケーションがチェックすることを可能にします。

### 16.12.1 チェック - 寸法が過拘束になるかどうかをテストする

DCM\_check\_result check( void\* ad, g\_node\* gn1, g\_node\* gn2 = DCM\_NULL,

    g\_node\* gn3 = DCM\_NULL, g\_node\* gn4 = DCM\_NULL );

最初の引数は、アプリケーションの寸法へのポインタです。
次の4つの引数は、寸法が適用されるg\_nodeです。
半径寸法の場合、最初のg\_nodeのみが必要です。
ほとんどの寸法タイプでは、2つのg\_nodeが必要です。
対称または中点の拘束には3つのg\_nodeが必要で、対称軸または中点は3番目のg\_nodeです。
等距離の拘束には4つのg\_nodeが必要です。
寸法のタイプなど、寸法に関するその他の情報は、Frustumを介して見つかります。

この関数は、モデルに寸法または拘束を追加する前に、モデルが過拘束になるかどうかを素早くチェックするために使用されます。
これを使用すると、寸法を追加して評価を呼び出すよりも速くなります。
ただし、いくつかの制約があります：

- チェックされている寸法と競合する寸法に関する情報は提供されません。
この情報が必要な場合は、寸法を追加してからモデルを評価する必要があります。
- チェックは、DCMが過拘束であるが一貫した場合に解決できる能力を考慮しません。
関数は、これらの制約を追加することはできないと言いますが、実際には追加できる場合があります。
- チェックを実行するには、モデルが「評価済み」の状態である必要があります。
つまり、複数の寸法をチェックできるが、そのうちの1つしか追加できない場合、モデルを再評価する前にチェックできます。
- すべての寸法をチェックすることはできません。
チェックできないケースは、単一の自由度以上を削除します。
チェックできない特定のケースは次のとおりです：

\- 2つのジオメトリ間の同心制約。

\- 同じタイプの2つのジオメトリ間の一致制約。

\- 平行でない2つの直線間の距離寸法。

\- 2つの平行な直線以外のジオメトリ間の対称制約。

\- 等しいパラメータの制約はチェックできません。



ただし、ジオメトリが明確または固定されている場合、チェック関数は常に寸法を追加できないと返します。
- チェックされた寸法がモデルを過拘束にすることはない場合でも、寸法の値によって解が見つからない可能性があります。

関数は次のいずれかを返します：

- DCM\_CHECK\_POSSIBLE \- 指定された寸法を追加できます
- DCM\_CHECK\_UNKNOWN \- この寸法をチェックできません（上記のリストを参照）
- DCM\_CHECK\_NOT\_POSSIBLE \- 寸法を追加するための自由度が不足しています
- DCM\_CHECK\_NOT\_EVALUATED \- モデルが評価されていないため、チェックできません。

この関数の代替形では、すべての寸法データが関数の引数として渡されます：

DCM\_check\_result check( DCM\_d\_type d, g\_node\* gn1,

    g\_node\* gn2 = DCM\_NULL,

     g\_node\* gn3 = DCM\_NULL, g\_node\* gn4 = DCM\_NULL );

このチェックの最初の引数は、寸法のタイプです。
他の引数は、寸法が適用されるg\_nodeです。
半径寸法の場合、最初のg\_nodeのみが必要です。
ほとんどの寸法タイプでは、2つのg\_nodeが必要です。
対称制約には3つのg\_nodeが必要で、対称軸は3番目のg\_nodeであり、等距離制約には4つのg\_nodeが必要です。

DCM\_check\_result check( g\_node\* gn1, g\_node\* gn2, double dir\[2\] );

この関数は、2つのg\_node間の方向付き距離寸法をチェックするために使用されます。
寸法は、dirで指定された方向に平行に測定されます。
これらの2つの関数と上記で説明した関数の違いは、次のとおりです：

- アプリケーションの寸法を作成する必要はありません。
- ヘルプポイントを持つ寸法はチェックできません。
- パラメトリック曲線への距離寸法はチェックできません。
