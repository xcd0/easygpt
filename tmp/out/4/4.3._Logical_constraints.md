## 4.3 論理的な拘束

論理的な拘束（通常は単に拘束と呼ばれる）には関連する値がありません。
しばしば、エンジニアリング図面上では暗黙的に表されます（一方、値を持つ寸法は通常明示的に表示する必要があります）。一部の場合において、論理的な拘束と寸法は異なる扱いを受けます。
論理的な拘束の可能なタイプは以下の通りです。

特別な場合として、値を持つ寸法が論理的な拘束の存在を意味することがあります。
これは、2本の直線間の距離寸法であり、それらの間の平行な論理的な拘束を意味します。
一般的に、DCMは距離寸法の特別な値を論理的な拘束として解釈しません。
例えば、角度がゼロの2本の直線は平行として解釈されません。
ただし、DCMは剛体寸法に対して論理的な拘束を意味します。例えば、剛体角度の値が90度の倍数であれば、垂直な拘束を意味します（詳細は[4.2 剛体寸法](4.2._Rigid_dimensions.md)を参照）。

DCM関数: [add\_d](16.3._Defining_the_model_data.md)

フラスタム関数: [DCM\_dimension\_type](17.2._Basic_dimension_functions.md)

### 4.3.1 パラレル

これは、方向を持つ図形のペア間でのみ定義されます。つまり、直線、楕円、およびパラメトリックです。
これは、図形の方向が平行であることを意味します。
2つの図形を平行と指定することは、角度寸法をゼロにすることとは異なります。
例えば、2つの直線を平行にすると、直線の前方方向は重要ではありません。
したがって、評価に続いて、直線は平行かつ整列しているか、または「反平行」である可能性があります。

![fig22_aligned.bmp](../Resources/Images/2ddcm_manual/Logical constraints.png)

図22：これらのいずれの構成も平行な直線で可能です

2つの平行な楕円の場合、次の構成は2つの可能性のうちの1つです。
楕円上に描かれた線は、長軸の方向を示しています。

![fig23_parallel_ellipse.bmp](../Resources/Images/2ddcm_manual/Logical constraints_1.png)

図23：平行な楕円

デフォルトの解決策は、元の図形の構成に最も近いものですが、[Frustum関数](17.2._Basic_dimension_functions.md)を使用して制御することもできます。

### 4.3.2 垂直

これは、方向を持つ図形のペア間でのみ定義され、その方向が直交していることを意味します。
平行な寸法と同様に、2つの可能な解があり、DCMは元の図形の配置に最も近い解を選択しますが、Frustum関数[DCM\_dimension\_alignment](17.2._Basic_dimension_functions.md)を使用して制御することもできます。

### 4.3.3 同心

これは、円、楕円、点の組み合わせに対して定義されます。
また、円錐曲線と点の間にも定義できます。
これは、図形の中心が一致することを意味します。
楕円の場合、中心は長軸と短軸の交点に取られ、円錐曲線の場合は焦点が中心とされます。
いくつかの例は次のとおりです：

- 円/円 \- 円は同心です。
- 円/点 \- 点は円の中心にあります。
- 点/点 \- 点は同一です。
これは、一致制約を使用するのと同じ結果を与えます。

同心楕円の例は、[図24：同心楕円](#_Ref420911624)に示されています。

![fig24_concentric_ellipses.bmp](../Resources/Images/2ddcm_manual/Logical constraints_2.png)

図24：同心楕円

円錐曲線と点の間の同心制約の場合、円錐曲線はDCM\_CONIC\_SHAPE\_PARABOLAの形状とDCM\_CONIC\_TYPE\_FIXED\_SHAPE\_BEZIERのタイプを持っている必要があります。
他の形状やタイプの円錐曲線は現在サポートされていません。

### 4.3.4 接線

これは、曲線の図形（円、楕円、またはパラメトリック）と、他の曲線の図形または直線の間で定義され、図形が接線的であることを意味します。
なお、円または楕円への接線拘束には、オプションでヘルプポイントを指定することができます。
パラメトリックへの接線拘束には、ヘルプパラメータを指定する必要があります。
セクション[4.1.2.3 ヘルプポイントとヘルプパラメータ](4.1._Dimensions_with_a_value.md)を参照してください。

#### 4.3.4.1 接線の整列

接線の拘束の整列は、アプリケーションによって制御されます。
これにより、2つの曲線の接線方向が同じ方向か逆方向かが決まります。
方向間の角度が0度の場合、接線は整列します。
角度が180度の場合、接線は反整列します。

![fig25_aligned_anti_tangents.bmp](../Resources/Images/2ddcm_manual/Logical constraints_3.png)

図25：整列および反整列の接線の拘束

DCMの以前のバージョンでは、アプリケーションはジオメトリの事前配置によってのみ接線の整列を指定および変更することができました。
このリリースでは、接線の拘束を作成または編集する際に、接線の整列を指定する機能が追加され、拘束の事前配置の必要性がなくなります。
さらに、パラメトリックジオメトリに接線を適用する際に、整列が指定されていない場合、DCMは解を得るために整列を変更することがありました。
整列を使用すると、整列が常に保持されるようになります。

フラスタム関数：[DCM\_tangent\_alignment](17.2._Basic_dimension_functions.md)

### 4.3.5 重なり

もし点と任意の図形の間に重なりの拘束が定義されている場合、それは点が図形上にあることを意味します。
なお、円または楕円と点の間の重なりの拘束には、ヘルプポイントをオプションで指定することもできます。
点とパラメトリックの間の重なりの拘束には、ヘルプパラメータを指定する必要があります。
セクション[4.1.2.3 ヘルプポイントとヘルプパラメータ](4.1._Dimensions_with_a_value.md)

同じタイプの2つの図形の間に定義された重なりの拘束は、それらが同一であることを意味します。
例えば、2つの円または2つの楕円の間の重なりの拘束は、それらの中心が一致し、同じ半径を持つことを意味します。

2つの直線または2つの楕円の間の重なりの拘束は、それらが平行または反平行であることも意味します。
DCMは、図形の元の構成に最も近い解を選択しますが、[DCM\_dimension\_alignment](17.2._Basic_dimension_functions.md)関数を使用して制御することもできます。

### 4.3.6 対称

対称拘束は、同じ種類の2つの図形と直線の間で定義されます。
これは、2つの図形が直線の反対側に対称的に配置されていることを意味します。
2つの円または楕円を対称にすると、その半径は同じになります。
対称拘束はスプライン曲線間にも適用できます。
詳細は、セクション[9.4.2 依存パラメトリック曲線間の拘束](9.4._Dependent_evaluated_parametric_curves.md)を参照してください。

セクション[2.7.2 過拘束だが整合したモデル](2.7._Solving_over-defined_models.md)を参照してください。

対称性を解決する際に、事前解決を行うことでパフォーマンスを向上させることができます。
DCMがモデルを事前解決するレベルは、set_optionを使用して設定できます。
詳細は、セクション[16.2.6.9 事前解決レベル](16.2._Configure_global_DCM_behaviour.md)を参照してください。

#### 4.3.6.1 対称性の整列

アプリケーションは、対称性の拘束が直線、楕円、スプライン、評価されたパラメトリックのような指向性のある図形の間で適用される場合の対称性の整列を制御することができます。

対称性は、ある図形を軸について反射させると、他の図形に一致整列する場合に整列しています。
対称性は、ある図形を軸について反射させると、他の図形に一致反整列する場合に反整列しています。

[図26 整列（左）と反整列（右）の対称性の拘束](#_Ref114564722)は、これらの2つの構成を示しています。
対称性の軸の方向は、対称性の整列には関係ありません。
これらの例では、どちらの場合でも上向きまたは下向きになる可能性があります。

![](../Resources/Images/2ddcm_manual/Logical constraints_4.png)

図26 整列（左）と反整列（右）の対称性の拘束

DCMの以前のバージョンでは、対称性の整列はアプリケーションによって図形の事前配置を介してのみ影響を受けることができました。
ただし、DCMは依然として図形の初期位置に対して整列を変更することができました。
バージョン75以降、アプリケーションは、対称性の拘束を作成または編集する際に、事前配置の必要なしに専用のフラスタム関数DCM\_symmetry\_alignmentを使用して所望の整列を強制することができます。
アプリケーションが整列を指定しない場合、DCMは元の図形の位置に最も近い構成に解決する可能性がありますが、これは保証されていません。

フラスタム関数：[DCM\_symmetry\_alignment](17.2._Basic_dimension_functions.md)

### 4.3.7 通常

通常の拘束は、直線または曲線と曲線の間、または曲線と曲線の間に適用することができます（2つの直線は通常の拘束を作ることはできず、代わりに垂直拘束を使用する必要があります）。これは、曲線が交差し、交差点で曲線の接線方向が直交していることを意味します。
例えば：

- 直線は楕円に対して通常の拘束を作ることができます。
- 直線はパラメトリック曲線に対して通常の拘束を作ることができます。

2つの楕円は通常の拘束を作ることができます。
曲線が交差する場所は複数あり、適切な交差点を特定するためにヘルプポイントを使用する必要があります。

DCM\_OPKEY\_NORMAL\_SOLVING\_MODEオプションを使用すると、通常の拘束が回転または移動を使用して解決されるかをアプリケーションが指定できます。
セクション[16.2.4.13 回転または移動を使用して通常の拘束を解決する](16.2._Configure_global_DCM_behaviour.md)を参照してください。
DCM\_OPVAL\_NORMAL\_ROTATIONはバージョン65で導入されたため、旧モデルでは動作の変更を避けるためにDCM\_OPVAL\_NORMAL\_TRANSLATION値を選択することができます。

デフォルトでは、DCMは回転を使用して通常の拘束を解決しようとします。
これは通常、直線の幾何学的な小さな回転が大きな移動を置き換えることができるため、直感的な解決策を提供します。
これは、[図27：回転と移動を使用して通常の拘束を解決する](#_Ref428458776)で示されており、スプラインに接する直線、幾何学が回転した場合の解決策、および幾何学が移動した場合の解決策を示しています。

![](../Resources/Images/2ddcm_manual/Logical constraints.jpg)![](../Resources/Images/2ddcm_manual/Logical constraints_1.jpg)![](../Resources/Images/2ddcm_manual/Logical constraints_2.jpg)

図27：回転と移動を使用して通常の拘束を解決する

通常の拘束を解決する際に回転をデフォルトにするオプションを使用していても、DCMが幾何学を回転させて通常の拘束を満たすようにすることは可能です。
アプリケーションは、追加の制御を使用することができます。例えば：

- 両方の幾何学に一致する点を追加し、重み付き標準解決モードを使用してその点を固定することができます（セクション[2.5.6.2 重み付き標準解決モード](2.5._Evaluating_the_model.md)を参照）
- パラメトリックの場合、所望の交差点で固定ヘルプパラメータを指定することができます（セクション[7.3.1 ヘルプパラメータの固定](7.3._Help_parameters.md)を参照）

#### 4.3.7.1 通常の配置

通常の拘束を満たすためには、反時計回りと時計回りの2つの配置があります。

最初の配置では、2つ目の図形の方向または接線方向は、最初の図形の方向または接線方向を反時計回りに90度回転させることで得られます。
2番目の配置では、回転は時計回りです。
[図28 スプラインと直線の間の反時計回り（左）と時計回り（右）の通常の配置](#_Ref114582768)は、スプライン（最初の図形）と直線（2番目の図形）の間の通常の拘束の2つの可能な配置を示しています。

![](../Resources/Images/2ddcm_manual/Logical constraints_5.png)

図28 スプラインと直線の間の反時計回り（左）と時計回り（右）の通常の配置

DCMの以前のバージョンでは、通常の配置はアプリケーションによって図形の事前配置によってのみ影響を受けることができました。
ただし、DCMは図形の初期位置に対して配置を変更することができました。
2D DCMのバージョン75以降では、アプリケーションは専用のFrustum関数、DCM\_normal\_alignmentを使用して、DCMが解決する配置を強制することができます。

図形の順序は、拘束を追加する際に使用される順序です。[16.3.4 add\_r and add\_d - Creates a dimension node](16.3._Defining_the_model_data.md)を参照してください。

Frustum関数：DCM\_normal\_alignment

### 4.3.8 等しい半径

等しい半径の拘束は、2つの円の間でのみ適用できます。
これは、それらの半径が互いに同じであることを意味しますが、実際の半径の値を制御しません。

### 4.3.9 中点拘束

中点拘束は、点と他の2つの点または2つの直線の間に適用することができます。
これは、その点が他の2つの図形から等距離にあることを意味しますが、実際の距離を制御しません。
中点拘束の典型的な使用例は、点を境界線の中央に制約するために、無限線に制約を加え、線の両端に中点拘束を使用することです。

![fig26_midpoint.bmp](../Resources/Images/2ddcm_manual/Logical constraints_6.png)

図29: 中点拘束の例

図29の中点拘束の例では、点P1は点P2とP3に中点拘束がかけられています。P4は直線L1とL2に中点拘束がかけられています。

セクション[2.7.2 過拘束だが整合性のあるモデル](2.7._Solving_over-defined_models.md)を参照してください。

### 4.3.10 等距離制約

等距離制約は、2つの図形のペア間に適用されます。
この制約は、最初の図形の間の距離が、2番目の図形の間の距離と同じであることを意味しますが、実際の距離の値を制御しません。

等距離制約は、距離寸法がサポートされているすべての図形のペア間でサポートされています。
円の場合、アプリケーションは任意の円の2つのペアそれぞれにヘルプポイントを定義することができます。
楕円の場合、ヘルプポイントまたはヘルプパラメータが必要です。
パラメトリック曲線の場合、アプリケーションは曲線のためのヘルプパラメータを提供する必要があります。ただし、親曲線または同じ親を共有する他のオフセット曲線に制約されているオフセット曲線の場合は除きます。
これらのオフセット曲線の場合、等距離はオフセット距離またはオフセット距離の差として解釈されます。

2つの円が同心円に制約されている場合でも、アプリケーションはヘルプポイントを指定するオプションがあります。
この場合、ヘルプポイントは、距離が測定される円の各側を指定するために使用できます。
これにより、最小距離ではなく、円の対向側の距離を指定することができます。

複数の解が存在する場合に特定の解を選択するには、等距離制約に関与する2つの距離寸法にハーフスペースを設定することができます。
ハーフスペースは、指定された方向性を持つ図形のどちら側で距離が測定されるかを定義します（右側、左側、または未指定）。詳細は[5.6 寸法ハーフスペース](5.6._Dimension_half_space.md)を参照してください。
典型的な構成では、ジオメトリのペアの1つに追加の単純な距離寸法を使用して（等しい）距離の値を制御します。
この場合、解はその単純な距離と2つの等距離ペアのハーフスペースを注意深く定義することで制御できます。

等距離制約の典型的な使用例は、2つの直線の端点間に等距離制約を配置して、同じ長さにすることです。

2つの等距離ペアの図形が両方とも直線である場合、これは直線が平行であることを意味します。これは、それらの直線間に通常の距離寸法を使用する場合と同様です。

等距離制約が1つの図形を2回参照することも可能です。
たとえば、2つの直線が端点を共有している場合でも、同じ長さにすることができます。

詳細は[2.7.2 過拘束だが整合性のあるモデル](2.7._Solving_over-defined_models.md)を参照してください。

フラスタム関数：[DCM\_equal\_distance\_dimension\_point](17.2._Basic_dimension_functions.md)

### 4.3.11 パターンの拘束

モデルには、同じタイプの図形が規則的に繰り返される「パターン」がよく含まれます。
2D DCMでは、1次元（1D）パターンと2次元（2D）パターンの2種類のパターンがサポートされています。1Dパターンは、すべてのパターン内の図形が一定の線形距離でオフセットされる線形パターンと、図形が中心点を中心に一定の角度でオフセットされる角度パターンの2種類があります。
2Dパターンは常に線形であり、2Dパターン内の図形は2つの異なるオフセット距離値で2つの方向にオフセットされ、図形のグリッドまたは配列が形成されます。

元の図形の間の拘束は、パターン化された図形にも複製することができます。
DCMは、過拘束であるが一貫した場合に自動的に管理します。
同じグループ内の図形間や異なるグループの図形間に寸法を配置することも可能です。
線形または角度オフセットの値は、パターン値の寸法で直接指定することも、モデルの他の部分で決定することもできます。
たとえば、DCMが間隔を計算する完全な円形パターンや、指定された総長さを持つ線形パターンを持つことが可能です。
初期のパターン値も指定でき、評価が行われる前のパターン値を示すことができます。
これは未定義の解決動作に影響を与え、モデルが既に解決された位置にあるかどうかをDCMがチェックすることを可能にします。

1Dおよび2Dパターンの両方に対して、寸法や拘束をパターン内の任意の図形に配置することができます。
それらをすべて1つのインスタンスに配置する必要はありません。
[図30：寸法付き線形パターン](#_Ref241554396)は、複数のインスタンスに寸法で制約を付けたパターン図形の例を示しています。
[図33：2Dパターンを使用して類似要素のグリッドを変更する](#_Ref241554189)は、単一の解決中にパターン化されたプロファイルの形状とパターンの間隔を変更するためにDCMを使用する例を示しています。
ただし、DCMは、すべてのコピーが単一の「マスター」コピーからパターン化され、寸法がマスターコピーに追加された場合に、パターンの拘束を効率的に解決します。
これにより、アプリケーションはモデルに関連するすべての拘束を配置できます。

![fig27_linear_pattern.bmp](../Resources/Images/2ddcm_manual/Logical constraints_7.png)

図30：寸法付き線形パターン

パターンの解決パフォーマンスと未定義の動作は、事前解決オプションによって強く影響を受けます。
お客様には、通常デフォルトであるこのオプションのより高い値を使用することをお勧めします。
値を以前のバージョンに設定することは、古い未定義の動作にアクセスするためにのみ推奨されます。
セクション[16.2.6.9 事前解決レベル](16.2._Configure_global_DCM_behaviour.md)を参照してください。

線形パターンは、すべての要素に対して2次元パターンインターフェースを使用して実装することが推奨されます（すべての要素の2番目の方向の倍数を0に設定することにより）。
これには2つの利点があります。

- パターンが共通の参照にパターン化されるという制約の結果として、解決とパフォーマンスが向上します。

- 線形パターンの実装と配列パターンの間で共有されるアプリケーションコード。

#### 4.3.11.1 1Dパターン

各1Dパターンには以下が必要です：

- パターンを表す参照ノード。
このノードにより、パターンの状態（例：定義されているかどうか）をDCMが伝えることができ、内部の自由度を制約することができます。
1Dパターンには、符号付きの距離または角度の値のいずれか1つの内部自由度があります。

パターンには、方向（直線パターン）または中心（角度パターン）が必要であり、既存のDCM図形によって定義されます。
参照ノードが作成されると、定義図形のg\_nodeが指定され、これによりパターン参照ノードと定義図形の間に暗黙の制約が作成されます。

パターン化された図形のパターン制約のすべてで同じ参照ノードが使用されます。
定義図形は固定する必要はないため、パターンの方向または中心はモデルの自由度にすることができます。
- パターン化する2つの図形。
これらは同じタイプである必要があります。または、パラメトリックオフセット曲線の場合、2番目の図形は最初の図形に基づいたコピー曲線である場合があります。
- 乗数。
これは、パターン化された図形の相対的な間隔を定義する0でない整数です。
相対的な間隔には前方方向があり、乗数の符号が重要です。
- パターン制約は、各図形のペアとパターン参照ノードの間に適用され、オフセットは乗数とパターンの内部自由度によって定義されます。

パターン値は、乗数が1のパターン化された図形間の距離または角度です。アプリケーションで初期パターン値を指定することができ、これは未定義の解決動作に影響を与えることができますが、DCMが評価を呼び出さずに初期構成でパターンが満たされているかどうかを計算することも可能にします。
これが指定されていない場合、DCMはモデルからパターン値を計算します。

1Dパターンでは、アプリケーションは図形間にパターン制約をどのように追加するかを自由に選択できます。
いくつかの可能なスキームがあります：

- 「マスター」または参照インスタンスと他のインスタンスの間にパターン制約を追加します。
すべてのインスタンスは異なる絶対値を持ちます。例：1、2、3など。
この方法は、パターンのパフォーマンスを最適化するために一般的に推奨されます。
- ジオメトリの隣接するインスタンス間にパターン制約を追加します。
この場合、すべての乗数は同じ絶対値を持ちます。例：1、1、1など。

乗数の異なる値を使用して「ギャップ」のあるパターンを生成することができます。

![fig28_linear_pattern_multipliers.bmp](../Resources/Images/2ddcm_manual/Logical constraints_8.png)

図31：直線パターンの乗数

2つのインスタンス間に複数のパターン制約を追加することができます。
これにより、各インスタンス間に等しい角度の閉じた正規の円形パターンを作成することができます。

[図32：正規の円形パターン](#_Ref420912133)は、各ノードが「マスター」インスタンスに参照される円形パターンを示しています。
マスターから反時計回りに進み、次のグループはマスターに対して乗数1を持ちます。
次のグループはマスターに対して乗数2を持ち、などです。
最後のインスタンスには2つのパターン制約があり、乗数7と-1はマスターに対して定義されます。

![](../Resources/Images/2ddcm_manual/Logical constraints_9.png)

図32：正規の円形パターン

閉じた円形パターンでは、パターン値の制約は必要ありません。追加のパターン制約によって内部の角度自由度が除去されます。
パターン値の制約がないため、この例では反時計回りの方向の選択は任意です（正のパターン値に対応します）。

この方法は、パターン制約をポイントとラインのシーケンスに適用することで正規の多角形を作成するために使用することができます。
詳細は、[15.7 パターン](15.7._Patterns.md)を参照してください。

DCM関数：[add\_pattern](16.3._Defining_the_model_data.md)

フラスタム関数：[DCM\_pattern\_multiplier](17.2._Basic_dimension_functions.md)

#### 4.3.11.2 2Dパターン

各2Dパターンの拘束には以下が必要です：

- パターンを表す参照ノード。
このノードは、パターン全体の状態（例：定義されているかどうか）をDCMに伝え、内部の自由度を制約することができます。
2Dパターンには2つの内部自由度と2つの符号付き距離値があります。

パターンには、方向を定義するために既存のDCMライン2本が必要です。
参照ノードが作成されると、定義ジオメトリのg\_nodesが指定され、これによりパターン参照ノードと定義ジオメトリ間に暗黙の平行制約が作成されます。

同じ参照ノードは、パターン化された一連のジオメトリのすべてのパターン拘束で使用されます。
1Dパターンと同様に、定義ジオメトリは固定する必要はないため、方向はモデルの自由度となります。
- パターン化される2つのジオメトリ。
これらは同じタイプである必要があります。
- 2つの参照ノードの方向に対応する2つの乗数。
これは、パターン化されたジオメトリの相対的な間隔を定義する整数です。
相対的な間隔には前方向があり、乗数の符号が重要です。
注意：乗数のいずれかは0にすることができますが、両方は0にすることはできません。
- パターン拘束は、各ジオメトリのペアとパターンノードの間に適用され、乗数とパターンの内部距離自由度によってオフセットが定義されます。

1Dパターンの場合と同様に、初期パターン値を指定することができます。これにより、DCMがモデルが既に解かれた位置にあるかどうかを判断することができます。
初期パターン値が指定されていない場合、パターン値は評価の呼び出し中にモデルから計算されます。

2Dパターンでは、特定の2Dパターンに関連するすべてのパターン拘束は、ジオメトリの「参照」インスタンスから他のインスタンスに適用する必要があります。
インスタンスは異なる値のペアを持つ乗数を持つことになります。例えば、(0, 1)、(1, 2)、(1, -1)です。例えば、[図33：似た要素のグリッドを変更するための2Dパターンの使用](#_Ref241554189)は、シンプルなプロファイルの2Dパターンを示しています。
参照ジオメトリは、太字で示される左下隅のプロファイルです。
他のプロファイルのジオメトリは、対応する参照プロファイルのジオメトリに制約されます。
例えば、右上隅のインスタンスのジオメトリは、x方向に3、y方向に2の乗数を持ちます。

2Dパターン拘束が常に参照と各インスタンスの間に追加されるという事実は、特定の未定義の振る舞い、すなわち、「参照」インスタンスが他のインスタンスの位置をよく定義する他の制約が存在しない場合に移動されにくいことを意味します。

2Dパターンは、1D線形パターンを作成するためにも使用できます。
アプリケーションは常に、2Dパターンの2番目の参照方向に対して乗数「0」を返し、その方向のパターン値には値0を返す必要があります。

![fig30_2D_pattern.bmp](../Resources/Images/2ddcm_manual/Logical constraints_10.png)

図33：似た要素のグリッドを変更するための2Dパターンの使用

DCM関数：[add\_pattern\_2d](16.3._Defining_the_model_data.md)

フラスタム関数：[DCM\_pattern\_2d\_multipliers](17.2._Basic_dimension_functions.md)

### 4.3.12 同等の相対変換拘束

同等の相対変換拘束は、剛体変換によって1つの図形グループが同一の図形グループにマッピングされるように拘束するものです。
これにより、アプリケーションは図形の参照とインスタンスのコピーの概念を実装することができます。
例えば、1つの参照プロファイルを定義し、相対変換を使用してスケッチ内でこのプロファイルの1つ以上のインスタンスを使用することができます。
これにより、各インスタンスはさらなる拘束によって得られる方向や位置に関係なく、参照プロファイルと同じ形状とサイズを維持します。

同等の相対変換拘束は、2つの同等の図形と相対変換ノードである第3のg\_nodeの間に配置されます。
相対変換ノードはDCM変換のコンテナです。
任意の数の同等の図形のペアを1つの相対変換ノードに拘束することができます。
これらのすべてのペアは、同じ変換によって分離されるように拘束されます。

したがって、エッジとポイントのプロファイルは、同等の図形の各ペア間に同等の相対変換拘束を配置することで、インスタンス化されたコピーとして拘束されることがあります。

同等の相対変換拘束は、参照とインスタンス間の正確な変換を定義しません。
これは、関連する図形間に任意のDCM拘束を追加することで別々に除去できる自由です。

同等の相対変換拘束が固定された図形間に適用される場合、これによって少なくとも一部の変換が定義されます。これは、関連する図形によって異なります（例えば、固定点間の相対変換拘束は変換の3つの自由度のうち2つが定義されます）。図形が楕円またはパラメトリックの場合、すべての自由度が除去されます。

同等の図形は、解析図形の場合は同じタイプの2つの図形であり、パラメトリック、スプライン、オフセット図形の場合は、2番目の図形は最初の図形から作成されたコピー曲線である必要があります。

DCM関数：[add\_relative\_transform](16.3._Defining_the_model_data.md)

フラスタム関数：[DCM\_relative\_transform\_transform](17.2._Basic_dimension_functions.md)

### 4.3.13 依存制約

依存制約は、パラメトリック曲線と他の図形（別のパラメトリック図形である場合もある）または変数の間にのみ適用できます。
これは、パラメトリック曲線が他のDCM図形または変数に依存していることをDCMに通知するために使用されます。
2つのタイプがサポートされています：

- DCM\_DEPENDENCE - 完全な変動依存制約。
DCMは、必要に応じて、この領域内の曲線を複数回再形成して、すべての制約を満たす形状を見つけるために、制約を曲線の領域に解決します。
- DCM\_SIMPLE\_DEPENDENCE - 限定的な依存。
DCMは、単純な依存制約で定義された曲線の領域に制約を解決しますが、順次解決が可能である場合にのみ、曲線の領域の単一の再形成が必要です。
これは、一部の制約スキーム、特に曲線の形状が曲線上の制約によって変化する場合には解決されないが、評価は常に高速であることを意味します。

詳細は、[7. パラメトリック図形の概要](7._Overview_of_parametric_geometry.md)を参照してください。

フラスタム関数：[DCM\_parametric\_regenerate](17.5._Frustum_functions_for_evaluated_parametrics.md)

### 4.3.14 等しい曲線特性の拘束

等しい曲線特性の拘束は、特定の特性に基づいて、パラメトリック曲線と他の曲線のジオメトリまたは直線の間で適用することができます。
また、同じパラメトリック曲線上の2つの位置間に等しい曲線特性の拘束を適用することも可能で、単一のジオメトリ拘束を作成します。
拘束は、ヘルプパラメータによって定義された曲線上の特定の位置で、曲線の特性を同じに設定します。
2番目のジオメトリが直線または円の場合、特性はそのジオメトリに対して一定であり、位置は必要ありません。
楕円の場合、拘束の位置はヘルプポイントによって定義されます。

以下の曲線特性の拘束がサポートされています：

- DCM_EQUAL_DIRECTION - 2つの曲線の接線方向を特定の位置で同じに設定します。
単純な接線拘束とは異なり、これらの曲線はこの位置で接触しているとは限りません。
パラメトリック曲線（スプラインを含む）または楕円と他のパラメトリック曲線、楕円、または直線の間に適用することができます。
- DCM_EQUAL_FIRST_DERIVATIVE - 2つの曲線の1次導関数（曲線パラメータに関する）を特定の位置で同じに設定します。
2つのパラメトリック曲線（スプラインを含む）または同じ曲線上の2つの位置間に適用することができます。
- DCM_EQUAL_SECOND_DERIVATIVE - 2つの曲線の2次導関数（曲線パラメータに関する）を特定の位置で同じに設定します。
2つのパラメトリック曲線（スプラインを含む）または同じ曲線上の2つの位置間に適用することができます。
- DCM_EQUAL_CURVATURE - 2つの曲線の曲率を特定の位置で同じに設定します。
2つのパラメトリック曲線（スプラインを含む）または同じ曲線上の2つの位置間に適用することができます。
- DCM_EQUAL_CURVATURE_DERIVATIVE - 曲率の長さに関する導関数を特定の位置で同じに設定します。
この拘束は、一般的なパラメトリックには現在サポートされていません。

拘束が作用する曲線上の位置は、ヘルプパラメータ（パラメトリック曲線の場合）またはヘルプポイント（楕円の場合）によって定義されます。拘束の正確な位置を定義するために、パラメータノードを作成して固定することも可能です（例：曲線の終端で）。

等しい曲線特性の拘束には、アライメントの概念がサポートされています。
ベクトル量（方向、1次および2次導関数）の場合、アライメントは2つの曲線ベクトルが平行または反平行であるか、初期構成に最も近いアライメントを選択するかを指定できます。
スカラー量（曲率および曲率導関数）の場合、アライメントは値の符号（正または負）のみを反映します。アライメントは等しい符号を意味し、アンチアライメントは異なる符号を意味します。

DCM関数：[parameter_node](16.3._Defining_the_model_data.md)

フラスタム関数：[DCM_equal_derivative_alignment](17.2._Basic_dimension_functions.md)

### 4.3.15 ロック拘束

ロック拘束は、評価時に図形やセットの移動を防止します。
これは、(全体の)図形に適用することもできますし、図形の中心や方向の移動を防止するために使用することもできます。

この拘束を適用することの効果は、関数fixを使用することと似ていますが、次のセクションで説明されているように、重要な利点があります。同じ図形やセットに複数のロックを割り当てることができます。

ロック拘束はr\_nodesの一種であり、次の3つのバリアントがあります。

- DCM\_LOCK\_WHOLE \- 評価時に図形やセット全体の移動を防止します。
これは、図形やセットに対して関数fixを使用するのと同等であり、以下に説明するようないくつかの利点があります。

ロック全体は、すべての種類の図形やセットに適用することができ、ポイントに適用することができる唯一のロック拘束です。
- DCM\_LOCK\_CENTRE \- 評価時に図形の中心の移動を防止します。
効果は、図形を固定点に同心円状にするのと同じです。

ロック中心は、円や楕円にのみ適用することができます。
- DCM\_LOCK\_DIRECTION \- 評価時に図形やセットの方向の変更を防止します。
効果は、指向性のある図形と固定された直線の間に平行拘束を追加するか、セット内の指向性のある図形と外部の固定された直線の間に平行拘束を追加するのと同じです。

ロック方向は、どのような指向性のある図形にも対応しており、直接セット全体に適用することができます(剛体、スケーラブル、単一または双方向スケーラブル)。

回転対称性を持つセットの場合、ロック方向拘束を使用して、構築図形を追加せずにセットの剛体回転自由度を除去することができます。

DCM関数: [add\_r](16.3._Defining_the_model_data.md)

#### 4.3.15.1 ロックと固定の比較

ロック制約は、図形の固定に対する代替手段です。
ロックの利点は次のとおりです。

- ロック制約は、拘束バランスの拘束数に寄与します。
- 固定された図形間の拘束は、DCMによって無視されるため、これらの拘束が満たされているかどうかの情報は提供されません。
対照的に、ロックされた図形への拘束はDCMによって無視されません。
もし拘束が満たされていない場合、失敗を示すステータスが与えられます。
しかし、もし満たされている場合、それらは「解かれ」ることはありませんので、パフォーマンスにはほとんど影響しません。
- 固定された図形は常にG\_FIXEDのステータスを持ちます - 拘束スキームに問題があることを示すステータスはありません。
これは、過定義モデルでは、図形の固定が問題の一部であることを直接示す手がかりがない場合があります。
ロック制約を使用すると、図形にはステータスG\_WELL\_DEFINEDまたはG\_UNDER\_DEFINEDが与えられますが、ロック制約がシステム内の他の拘束と競合している場合は、G\_OVER\_DEFINEDなどの失敗ステータスが付けられることがあります。
- DCMは、固定された図形にドラッグ変換が明示的に与えられている場合、ドラッグ（dynamic\_evaluate）によって固定された図形を移動することを許可します。
しかし、ロック制約は常にDCMによって尊重され、入力変換が提供されていても、ロックされた図形は移動されません。
- ロックされた図形と固定されたノードは、明示的な変換が指定されている場合、move\_and\_evaluateを使用して移動することができます。

なお、ロックされたノードの場合、move\_and\_evaluateは、現在、ジオメトリの成分のみがロックされている場合には完全にサポートされていません。

図形が固定されており、ロック制約もある場合、図形はG\_FIXEDのステータスを持ち、ロック制約はD\_BETWEEN\_FIXEDのステータスを持ちます。
