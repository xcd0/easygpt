## 4.1 値を持つ寸法

距離や角度の寸法、円の半径はゼロの値を取ることができますが、この場合は論理的な拘束を使用して寸法を表現することが通常好ましいです。
これは、DCMは現在ゼロであっても、後で寸法の値が変更される可能性を前提とした解を見つけるためです。

ゼロの値を持つ寸法は、キラリティの問題も引き起こす可能性があります。
[5.5 キラリティの曖昧なモデル](5.5._Models_with_ambiguous_chirality.md)のセクションを参照してください。

DCM関数: [add\_d](16.3._Defining_the_model_data.md)

フラスタム関数: [DCM\_dimension\_type](17.2._Basic_dimension_functions.md)

### 4.1.1 寸法値

寸法の値は、次の2つの方法で指定できます。

- アプリケーションによって選択された実数として与えられ、DCMの呼び出しの間にのみ変更できます。
- 変数に変換することもできます。
変数は方程式と結び付けることができます。
DCMは、これらの方程式を他の寸法や拘束条件と同時に解いて、変数の値を求めます。
モデルの評価については、セクション[2.5 モデルの評価](2.5._Evaluating_the_model.md)を参照してください。

フラスタム関数: [DCM\_dimension\_value](17.2._Basic_dimension_functions.md)

### 4.1.2 距離

これは、すべての種類の図形のペアに対して定義されます。
注意すべき点は次のとおりです。

- 距離寸法の値は、半空間またはアライメントが定義されている場合にのみ負になることがあります。
- 直線/直線 - 2つの直線間の距離は、与えられた間隔で平行であることを意味します。
DCMは、2つの直線間に平行な論理的な拘束があるかのように扱います。
- 点/点および点/直線 - 点と図形の間の最小距離を示します。
- パラメトリック/任意の図形 - 章[7. パラメトリック図形の概要](7._Overview_of_parametric_geometry.md)を参照してください。
- 円/任意の図形および楕円/任意の図形 - 円や楕円への距離寸法は、最小距離寸法またはヘルプポイントを持つ寸法の2つのタイプになります。
詳細については、以下のセクションを参照してください。

#### 4.1.2.1 最小距離寸法

もし図形が交差しない場合、寸法はそれらの間の最小距離です。
もし交差する場合、それは可能な分離距離の中で最も小さいものです。
これは、円の直径を横切る寸法を取ることはできないことを意味します。
例えば、[図12: 最小距離寸法の解釈](#_Ref420906513)に示される3つの構成で、円と直線の間の寸法はDCMによって許可される唯一の寸法です。

![fig12_min_distance.bmp](../Resources/Images/2ddcm_manual/Dimensions with a value.png)

図12: 最小距離寸法の解釈

#### 4.1.2.2 ヘルプポイントを使用した寸法

DCMにヘルプポイントを提供することで、円や楕円の指定された「側面」に寸法を付けることができます。
ヘルプポイントはアプリケーションによって提供され、DCMによって使用され、寸法が計測される図形のどの側面かを定義するために使用されます。
ヘルプポイントは幾何学的な実体ではありません。
ヘルプポイントは、寸法と図形に関連付けられた位置ベクトルであり、したがって、円-直線距離寸法には1つのヘルプポイント、円-円距離寸法には2つのヘルプポイントが存在することができます。
以下の表は、ヘルプポイントが使用できる場合を示しています。

[図13: ヘルプポイントを使用した距離寸法の解釈](#_Ref420906536)は、円と直線の間のこのタイプの寸法の値を増やすことの効果を示しています（楕円への寸法についても同様の構成が可能です）。小さな円はヘルプポイントの位置を示しています。

![fig13_help_points.bmp](../Resources/Images/2ddcm_manual/Dimensions with a value_1.png)

図13: ヘルプポイントを使用した距離寸法の解釈

アプリケーションは、ヘルプポイントのおおよその位置を提供するだけで十分です。
以下の例は、円と直線の間の距離寸法と、ヘルプポイントの初期のおおよその位置を示しています。
評価時に、DCMはヘルプポイントを円上の正確な位置に移動します。
アプリケーションは、このヘルプポイントの位置を使用して、寸法のリーダーラインを描く方法を決定することができます。
これは、特に楕円への寸法には特に役立ちます。

![fig14_circle_line.bmp](../Resources/Images/2ddcm_manual/Dimensions with a value_2.png)

図14: 円-直線寸法のヘルプポイント

ヘルプポイントは、距離寸法、接線、法線制約、および円または楕円への一致制約に指定することができます。
距離寸法にヘルプポイントが指定されていない場合、DCMは寸法が最小距離寸法であると仮定します。
制約にヘルプポイントが指定されていない場合、DCMは最も近い解を使用します。
一部の場合（例えば、2つの円の間の距離寸法）では、両方の図形にヘルプポイントを指定することが可能です。
これらの場合、ヘルプポイントは両端にあるか、両端にないかのいずれかである必要があります。

なお、円の半径がゼロの場合、ヘルプポイントは寸法が計測される側面を定義しません。
[5.5 曖昧なキラリティを持つモデル](5.5._Models_with_ambiguous_chirality.md)のセクションを参照してください。

#### 4.1.2.3 ヘルプポイントとヘルプパラメータ

ヘルプパラメータは、寸法や拘束に対して使用されます - [7. パラメトリック図形の概要](7._Overview_of_parametric_geometry.md)を参照してください。
例えば、直線と円の間の寸法には、ヘルプポイントが1つあるかないかのどちらかがあります。
同様に、円とパラメトリック曲線の間の寸法には必ずヘルプパラメータが必要であり、オプションでヘルプポイントを持つことができます。

ポイント

直線

円(4)

楕円(5)

パラメトリック

ポイント

0

0

0/1

0/1

0(1)

直線

0

0

0/1

0/1

0(1)

円(4)

0/1

0/1

0/2

0/1(3)/2

0/1(1)

楕円(5)

0/1

0/1

0/1(3)/2

0/2

0/1(1)

パラメトリック (スプライン、円錐曲線を含む)

0(1)

0(1)

0/1(1)

0/1(1)

0(2)

コピーまたはオフセット曲線

基準曲線として

表2: ヘルプポイントの許容組み合わせ

注：

- (1) ヘルプポイントはオプションですが、パラメトリック（またはオフセットパラメトリック）には必ず1つのヘルプパラメータを使用する必要があります。

- (2) 2つのヘルプパラメータが必要です。
- (3) 円と楕円の間の寸法には、楕円上に配置する必要がありますが、ヘルプポイントを1つ使用することも可能です。
- (4) 等距離拘束を使用して円のペアを拘束する場合、各円のペアには0個または2個のヘルプポイントを使用する必要があります。
1つの円のペアのみにヘルプポイントを使用することも許可されています。
- (5) 楕円への寸法は、ヘルプパラメータ、ヘルプポイント、またはどちらも使用することができます。
アプリケーションは、まずヘルプパラメータを使用するか、ヘルプポイントを使用することを指定する機会を与えられます。
以下の制限が適用されます：

- 曲線の拡張を持つ楕円へのすべての寸法には、ヘルプパラメータが必要です。
- オフセット楕円への寸法には、アプリケーションはヘルプパラメータまたはヘルプポイントを使用する必要があります。
- 方向付き距離寸法の場合、アプリケーションはヘルプパラメータまたはヘルプポイントを使用する必要があります。
- その他の楕円へのすべての寸法には、ヘルプポイントは必須ではありませんが、使用することが推奨されます。

DCM関数：[help\_point](16.5._Enquiry_functions.md)

台形関数：[DCM\_dimension\_point](17.2._Basic_dimension_functions.md)

#### 4.1.2.4 指向距離寸法

通常、距離寸法は2つの図形間の最小距離を測定します。
ただし、直線以外のすべての図形については、特定の方向で距離を測定することが可能です。
この機能を使用する例として、ポイント間の水平および垂直距離寸法を実装することができます。

寸法の方向は、絶対ベクトル値または直線の方向（垂直または平行）に対して指定することができます。
後者の方法では、直線の角度が変わるたびに寸法の方向も変わります。

指向距離寸法を円または楕円に使用する場合は、ヘルプポイントを指定する必要があります。
したがって、最小距離の指向距離寸法を持つことはできません。

平行な指向距離は符号付きにすることができますが、垂直な距離はできません。

バージョン75.0から、指向距離のための強化された解決方法が導入され、デフォルトで有効になっています。
アプリケーションは、グローバルオプションを設定することで、古い動作に戻すことができます。詳細は[16.2.6.15 指向距離の解決モードを制御する](16.2._Configure_global_DCM_behaviour.md)を参照してください。

![fig15_directed_distances.bmp](../Resources/Images/2ddcm_manual/Dimensions with a value_3.png)

図15：指向距離寸法の例

フラスタム関数：[DCM\_directed\_distance](17.2._Basic_dimension_functions.md)

#### 4.1.2.5 符号付き距離と方向付き距離

通常の距離（および半径）寸法の場合、DCMは常に解を計算する前に寸法の絶対値を取るため、寸法の値が+1または-1であるかどうかは関係ありません。

ほとんどの距離寸法では、追加の制御を使用して符号付き距離を使用することができます。
これにより、アプリケーションは解に対してより良い制御を行うことができます。
これにより、図形の事前位置合わせの必要性が減少します。
また、寸法の初期値がゼロの場合の動作についても、アプリケーションは非ゼロの値に変更された場合に距離が測定される方向を予測することができます。

方向付き距離は、使用されている方向に平行に測定される場合に符号付きにすることができます。
この場合、符号は測定方向に沿った2つの図形の相対的な順序に関連しています。これは値の方向との整列によって決まります。
垂直距離には符号を付けることはできません。

その他の距離の場合、アプリケーションは寸法が解かれるべき図形の側または半空間を指定することができます。
たとえば、点と直線の間の距離寸法は2つの方法のいずれかで解かれることがあります。点はその直線の両側にある2つの異なる直線上にある必要があります。
2D DCMでは、これらの2つの解を異なるキラリティと見なし、デフォルトの動作はDCMが図形の初期開始位置に対応する解を提供することです。
DCMは常に、さらなる解決中にこの初期の測定キラリティを保持するようにします。

符号付き寸法の場合、DCMは拘束の解を計算する際に寸法値の符号を使用します。
符号付き距離の場合、DCMは正から負までの連続した範囲の値を解くことができます。

符号付き距離の詳細については、セクション[5.6 寸法の半空間](5.6._Dimension_half_space.md)の半空間の定義を参照してください。

フラスタム関数：[DCM\_dimension\_half\_space](17.2._Basic_dimension_functions.md)

### 4.1.3 半径

これは円と楕円にのみ定義されます。
円の場合、半径寸法は円の半径を与えます。
円の半径寸法は0以上の値を持つことができます。
楕円は2つの半径を持つことができます。
1つは主半径であり、もう1つは副半径であり、両方とも現在の線形解像度よりも大きくなければなりません。
主半径が副半径よりも大きい必要はありません。

### 4.1.4 角度

これは、方向を持つ図形のペア間でのみ定義され、2つの方向の間の角度をラジアンで示します。
角度は、2つの前方方向の間で測定され、最初から2番目に反時計回りに取られ、0から2πラジアンの間の任意の値を取ることができます。
もしアプリケーションが角度の値を0未満または2πより大きい値で返した場合、DCMは自動的にこの範囲に調整します。

図16: 2つの直線間の角度の定義

図17: 2つの楕円間の角度の定義

#### 4.1.4.1 アプリケーションにおける角度寸法

角度寸法のDCM（Dimensional Constraint Manager）の定義では、0から2πラジアンの任意の値を持つことができます。
この定義は、図形に関連付けられた前方方向を使用しています。

一般的に、アプリケーションでは、例えば線の前方方向を表示せず、角度寸法を2つの線の間の任意のセクタに配置することができます。
これを容易にするために、アプリケーションは、ユーザーに表示される寸法とDCMに与えられる寸法との間で変換する必要があります。
これを行う方法については、以下で説明します。

[図18：2つの交差する線の間のセクタの特性](#_Ref190077893)は、線1と線2、およびそれらの前方方向を示しています。
これらの線は4つのマイナーセクタ（すなわち、πラジアン未満のセクタ）を定義します。各セクタは2つの基準で区別することができます。
これらは以下のように見つけることができます。

- 興味のあるセクタを選ぶ。
- 線1をセクタを通って線2に回転させる（角度がゼロになるように）。
- この回転の方向を覚えておきます。時計回りまたは反時計回りですか？
- 回転の終わりに、線1は線2と一致します。線が平行か反平行かを判断します。

2つの線の間の4つのセクタの例は、[図18：2つの交差する線の間のセクタの特性](#_Ref190077893)に示されています。

![fig18_sectors.bmp](../Resources/Images/2ddcm_manual/Dimensions with a value_6.png)

図18：2つの交差する線の間のセクタの特性

DCMでは、角度寸法は常に平行/反時計回りのセクタとして計算されます。
DCMに角度寸法の値を与える前に、アプリケーションは測定された角度がどのセクタにあるかに応じて、測定された角度の値を変更する必要があります。

以下は、測定された角度がangの場合にDCMに与える角度のリストです。

- 平行/反時計回りのセクタ：ang
- 反平行/時計回りのセクタ：π - ang
- 平行/時計回りのセクタ：2π - ang
- 反平行/反時計回りのセクタ：π + ang

同じテクニックは、角度がメジャーセクタ（つまり、測定された角度の値がπより大きい場合）にある場合にも使用されます。例えば、[図19：2つの境界線の間のセクタの特性](#_Ref190077934)は、2つの境界線の間のセクタがどのように分類されるかの例を示しています。

![fig19_sectors.bmp](../Resources/Images/2ddcm_manual/Dimensions with a value_7.png)

図19：2つの境界線の間のセクタの特性

左側の例では、線が配置されていて、マイナーアングルがDCMが期待するセクタにすでにあるため、調整は必要ありません。
アプリケーションがメジャーアングルを必要とする場合は、ルール「平行-時計回り」を使用して値を変換する必要があります。

右側の例では、最初の線が反転されているため、この場合、DCMの角度は線1の延長から線2までを測定しています。この場合、線の境界部分の両方の角度を変換する必要があります。

### 4.1.5 弧長

弧長寸法は、円弧の長さを拘束します。
これは、始点から終点までの円の周囲を反時計回りに移動する距離として定義されます。

弧長寸法は、値を持つ寸法であり、円と境界付きの弧を定義する2つの点に作用します。
DCMは、弧長を解くために、終点が円に共有されるように別々に拘束されることを要求します。
これは、共有拘束を使用するか、点と円を固定するか、または同じセットに配置することによって行うことができます。

モデル内に十分な自由度がある場合、DCMは点の位置を変化させ、円の半径を変更することで弧長を解くことができます。

点の順序は重要です。これにより、弧を形成する円の一部を定義します。
弧長寸法は常に符号付きであり、正の方向は円周を反時計回りに回る方向に対応し、これはDCMの角度定義と一致します。

この寸法により、2つの点によって囲まれた円の周囲の一部が寸法の値と等しくなることが保証されます。
DCMは、弧を円周の一周以上に巻き付けて長さを大きくすることで、弧長を解くことがあります。
これは巻き付けとして知られています。

弧長寸法は、弧の弧度を制限する手段を提供しません。
DCMは、モデルを解く際に、弧の弧度が2π（360度）を超えるように円を巻き付けることがあります。

![fig20_arc_length.bmp](../Resources/Images/2ddcm_manual/Dimensions with a value_8.png)

図20：弧長と巻き付け角度

弧長寸法は、可変寸法をサポートしており、DCMの方程式に追加したり、単に測定のための参照寸法として使用することができます。

以下の制限が適用されることに注意してください：

- 剛体の弧長寸法は完全にサポートされていません。
デフォルトでは、DCMは弧長が剛体であるかどうかを問い合わせますが、その情報を使用して過拘束で一貫性のあるケースを許可しません。
この問い合わせを無効にするオプションが存在します（バージョン71以前の動作を提供）または完全なOCC処理を有効にしようとするオプションが存在します（現在はサポートされていません）。
- 弧長寸法は、円がスケーラブルなセットにある場合にはサポートされていません。

未定義のモデルでは、DCMは解を見つけるために半径または点の位置のどちらかを変化させることを選択する場合があります。
変換バイアス機能を使用して、どのジオメトリが移動されるかに影響を与えることができます。

DCM関数：[add\_d](16.3._Defining_the_model_data.md)

台形関数：[DCM\_winding\_angle\_start\_value](17.2._Basic_dimension_functions.md)

#### 4.1.5.1 巻き角度と巻き数

DCMは、弧の概念を弧長の拘束の文脈でのみ認識します。
3つの拘束条件（共有端点と弧長寸法）が存在しない場合、DCMはモデル内に点と完全な円のみが存在することを知っています。

DCMの用語では、弧は円の完全な周回数を含むことがあります。
弧に組み込まれる完全な円の数は、巻き数と呼ばれることがあります。
巻き数は、弧長の拘束が解かれた巻き角度のモジュラスです。
したがって、値が5πの弧は巻き数2に相当し、-3πの値は巻き数1に相当します（逆方向で測定）。

アプリケーションは、フラスタムを通じて必要な巻き角度を指定することができます。
これは、解決策での弧長が円を何周するかのガイドとして機能し、解決策のより大きな制御を可能にします。
数値ではなく角度値が使用されることで、解の連続性を確保し、望ましくないジャンプを回避します。

例えば、基礎となる円の半径が拘束されておらず、必要な弧長が現在の円周よりも大きい場合、解決中に半径が増加する可能性があります。
これにより、弧を張る角度が2π未満になる可能性があります。これは、歯車や類似のメカニズムの開始位置を考慮する際に重要な要素となる場合があります。

巻き角度は、望ましい解を大まかに示すものですが、DCMに特定の巻き数を解くように強制するものではありません。
モデルへの他の入力によって、DCMは解を見つけるために弧を円の周りに複数回巻くことがあります。

### 4.1.6 曲線の長さ

曲線の長さの寸法は、楕円、評価されたパラメトリック曲線、円錐曲線、またはスプラインの長さを制約するために使用できます。
この寸法は、曲線の全長または一部の長さを測定することができます。
いずれの場合も、寸法の端点は曲線上のパラメータとして与えられます。
楕円の長さを制約するには、アプリケーションは寸法のための補助パラメータを指定する必要があります - セクション[4.1.2.3 ヘルプポイントとヘルプパラメータ](#_Ref90359680)を参照してください。

寸法は、最初のパラメータから2番目のパラメータまで測定されます。
曲線の長さは符号付きの値であり、負の場合は最初のパラメータが2番目よりも小さいことを示します。
以下の図は、楕円上の2つの曲線の長さの寸法を示しています（反時計回りにパラメータ化されています）。

![fig21_curve_length.bmp](../Resources/Images/2ddcm_manual/Dimensions with a value_9.png)

図21：楕円上の曲線の長さの寸法

開いた曲線の全長を寸法付けるには、曲線の開始と終了に固定されたp\_nodesを使用することができます（セクション[7.2.6 曲線の長さの寸法](7.2._Dimensions_and_constraints_to_parametric_curves.md)を参照）

周期的な曲線では、寸法は複数回「巻き戻る」ことができることに注意してください。

DCM関数：[add\_d](16.3._Defining_the_model_data.md)

フラスタム関数：[DCM\_dimension\_parameters](17.6._Frustum_functions_for_evaluated_parametrics_and_splines.md)

### 4.1.7 パターン値

この寸法クラスは、1Dまたは2Dのパターンの内部の自由度を取り除くことができます。
パターン値は、パターンの種類に応じて距離または角度である場合があります（セクション[4.3.11 パターンの拘束条件](4.3._Logical_constraints.md)を参照）。

パターン値の寸法は常に符号付きの量であり、DCMはアプリケーションによって提供される値の符号を考慮します。
線形パターンの場合、正のパターン値は、参照図形に対して方向が整列した方向でインスタンスがパターン化されることを意味します（正のパターン乗数の場合）。円形パターンの場合、正のパターン値は、反時計回りの方向でインスタンスがパターン化されることを意味します（正のパターン乗数の場合）。

DCM関数：[add\_r](16.3._Defining_the_model_data.md)
