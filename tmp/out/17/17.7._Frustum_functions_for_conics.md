## 17.7 円錐曲線のためのフラスタム関数

これらのフラスタム関数は、円錐曲線にのみ適用されます。

### 17.7.1 DCM_conic_update – 円錐曲線のプロパティの更新を許可する

void DCM_conic_update(void* ag, unsigned int m);

この関数は、評価中にアプリケーションが特定の円錐曲線のデータを変更することを可能にします。
円錐曲線のアプリケーションポインタ（ag）と、変更可能なデータを示すビット（DCM_conic_data_mask内のビット）を含むマスク（m）とともに呼び出されます。
他のデータを変更しようとする試みは無視されます。

この関数は、次の円錐曲線の振る舞いを実装するために使用されます：

- ベジエ曲線のρの変更

この関数が評価の開始時に呼び出されると、ρの値を増分評価中に変更することができます。
- 形状の変更

円錐曲線の形状プロパティが特定の形状に制限されている場合、このFrustum関数が呼び出される際に、このプロパティをupdate_conicを介して変更することができます。
- move_and_evaluate - 剛体または固定円錐曲線のみ。

注意：この機能は、DCMの現在のバージョンではサポートされていません。

剛体または固定円錐曲線がmove_and_evaluateの入力の一部としてNULLの変換を持つ場合、DCM_conic_updateはその曲線に対して一度だけ呼び出されます。
ただし、DCMインターフェースへのコールバックを介して曲線を変更する試みは行わないでください。
円錐曲線を使用したmove_and_evaluateの使用は未定義の動作を引き起こします。

この関数はオプションです - アプリケーションが値を変更する必要がない場合は、この関数を登録する必要はありません。

### 17.7.2 DCM\_conic\_changed – 円錐曲線が変更された場合の出力

void DCM\_conic\_changed ( void\* ag );

モデルが評価される際に、円錐曲線の位置や形状が変更された場合に呼び出されます。
これらの変更は以下の通りです：

- 新しいrho値 - 新しい値を求めるためには、conic\_dataを呼び出す必要があります。
- 3つの定義点の変更。

- もし円錐曲線がcp\_g\_nodesによって定義されている場合、新しい値は各点g\_nodesの出力された変換を通じて取得されるべきです。
- もし円錐曲線がcp\_vectorによって定義されている場合、新しい値はconic\_data関数を通じて取得されるべきです。

この関数は、柔軟でスケーラブルな円錐曲線に対してのみ呼び出されます。
剛体な円錐曲線に対しては呼び出されません。
もし剛体な円錐曲線がDCMによって移動される場合、制御点g\_nodesの代わりに円錐曲線のg\_nodeに対してDCM\_transform関数が呼び出されます。
