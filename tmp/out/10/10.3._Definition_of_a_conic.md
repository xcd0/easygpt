## 10.3 円錐曲線の定義

円錐曲線は以下のパラメータによって定義されます：

- 円錐曲線のタイプ。以下の3つのタイプのいずれかであり、すべてが境界付きです：

- DCM\_CONIC\_TYPE\_BEZIER - 円錐曲線は3つの制御点とρの自由度を持ち、ρは0 < ρ < 1の範囲で制約されます。許容範囲外の値は、最も近い有効な値に設定されます。
- DCM\_CONIC\_TYPE\_FIXED\_RHO\_BEZIER - DCMはモデルを解く際にρの値を変更しません（例：評価時）。
- DCM\_CONIC\_TYPE\_FIXED\_SHAPE\_BEZIER - rhoの値はDCM\_conic\_shapeパラメータに基づいて制限されます。許容範囲外の値は、最も近い有効な値に設定されます。

- 適切な場合の円錐曲線の形状：

- DCM\_CONIC\_SHAPE\_PARABOLAは、固定されたρの値0.5と等価です。
- DCM\_CONIC\_SHAPE\_ELLIPSEは、ρが0 < ρ < 0.5の範囲で解かれるようにします。
- DCM\_CONIC\_SHAPE\_HYPERBOLAは、ρが0.5 < ρ < 1の範囲で解かれるようにします。

- 円錐曲線のρの値、0 < ρ < 1に制限されます。
- 円錐曲線の剛性。以下のいずれかである場合があります：

- DCM\_CONIC\_RIGIDITY\_RIGID（ρは内部の自由度ではありません）
- DCM\_CONIC\_RIGIDITY\_SCALABLE（ρは内部の自由度ではありません）。円錐曲線にはバイスケーラブルおよびユニスケーラブルの剛性はサポートされていません。
- DCM\_CONIC\_RIGIDITY\_FLEXIBLE

- 空間内の位置（ベクトル）またはDCM内の既存の点（g\_nodes）である制御点の数。現在、必ず3つの制御点を提供する必要があります。最初と最後の制御点は、境界付き曲線の端点を表します。

### 10.3.1 縮退円錐曲線の入力

DCMには、縮退した円錐曲線の定義を与えることができます。つまり、曲線が無限の曲率を持つ場合、例えば半径がゼロの楕円です。通常、これは制御点がすべて共線の場合に発生します。

もし円錐曲線の形状を計算できない場合、または制御点間の有効距離、または円錐曲線の焦点が無限遠（つまり、モデルから定義されたDCMサイズよりも大きい）である場合、DCMはDCM\_CONIC\_STATUS\_NOT\_SOLVEDというステータスを返します。

もし円錐曲線の失敗が縮退した曲線に起因する場合、DCMは円錐曲線のbad\_dataプロパティを設定して問題の値を示します。例えば、焦点が無限遠になる場合、DCM\_CONIC\_NEAR\_FOCUSビットを設定します。

これは、制約が縮退した円錐曲線を示唆する場合に発生する可能性があります。または、アプリケーションが解決の開始時に互換性のないデータを指定し、制約が有効な位置を課さない場合にも発生する可能性があります。

DCMの現在のバージョンでは、デフォルトで円錐曲線の縮退ステータスは評価の失敗にはなりません。内部の円錐曲線のステータスがDCM\_CONIC\_STATUS\_NOT\_SOLVEDである場合でも、制約と図形はすべて解決ステータスを持つかもしれません。したがって、アプリケーションは円錐曲線のステータスをチェックし、これが悪い場合は全体の解決を失敗と見なす必要があります。

また、アプリケーションは、[16.2.4.14 縮退した円錐曲線の解決ステータスを制御する](16.2._Configure_global_DCM_behaviour.md)で文書化されているように、DCMのオプションの動作を設定して、縮退した円錐曲線を解決中に失敗としてマークすることもできます。
