## 11.2 図形のコピー

ほとんどの図形タイプは、同じタイプの別の図形を追加することでコピーすることができます。
パラメトリックな図形の場合、元の図形の正確なコピーを別の場所に変換して表すために、特別なコピー曲線タイプを追加することができます。

コピー曲線は、オフセット曲線、スプライン、円錐曲線、または評価されたパラメトリックに対して作成することができます。
他の図形タイプでは、コピー曲線はサポートされていません。

コピー図形と組み合わせてさまざまな拘束を使用することができます。
典型的な例は、DCMパターン拘束を使用してスケッチの一部の正確なコピーの規則的な配列を作成することです。

コピー曲線タイプは、パターン拘束がない場合でも、元の曲線と同じ形状を保持します。
単純な円の場合、半径の変化を避けるために等しい半径の拘束を使用する必要があります。楕円の場合は、両方の半径が保持されるようにするために複雑な構造が現在必要です。

### 11.2.1 オフセット、スプライン、パラメトリックの正確なコピー

DCMには、オフセット曲線、スプライン、評価されたパラメトリック曲線の正確なコピーを表す機能があります。
この曲線の種類はコピー曲線と呼ばれ、関数add\_copy\_gを使用してDCMに追加されます。
なお、コピー曲線に対しては、Frustum関数DCM\_g\_identifyは呼び出されません。

![fig55_copy_curves_spline.bmp](../Resources/Images/2ddcm_manual/Copy geometry.png)

図63：スプライン曲線のパターンに使用されるコピー曲線

コピー曲線を定義するために使用される曲線は、コピー親と呼ばれます。
オフセット曲線とは異なり、コピー曲線のコピーはサポートされていません。
これは、コピーのコピーは元の曲線と同じであるためです（一方、オフセットのオフセットは常に元の曲線のオフセットと等しくない場合があるため）。

上記の図は、コピー曲線の使用によって拘束解決に任意の方向性が課されないことを示しています。例えば、コピー曲線上の拘束は、元の曲線の形状を制御することができます。

オフセット曲線のコピーの特性は、コピー親のオフセットルートに依存します。
したがって、コピー親曲線（オフセットでないもののコピーの場合）またはオフセットルート曲線（オフセット曲線のコピーの場合）としてコピーのルートを定義する必要があります。

コピー曲線の特性は、そのコピー親に依存します。
コピーは、コピー親と同じ周期性を持ちます。
コピー曲線は、ルート曲線と同じ方法でパラメータ化されます。
ルート曲線が楕円である場合、コピー曲線は楕円と同じ方法でパラメータ化されます（つまり、反時計回りに0から2πまで）。

ルート曲線が評価されたパラメトリックであるコピーの場合、DCMはパラメトリック評価関数をルート曲線のみで呼び出し、コピー曲線では呼び出しません。
ルート曲線がスプラインまたは楕円であるコピーの場合、DCMは内部で形状を決定できます。

DCMは、コピー曲線に対して以下の情報を問い合わせます：

- コピー親をコピー曲線にマッピングする初期変換を、Frustum関数DCM\_copy\_transformを呼び出して指定します。

変換はオフセット曲線の開始位置を指定するために使用されます。
これは、望ましい解決策を指定するものではありません。
アプリケーションは、望ましい解決策を指定するために拘束と寸法を追加する必要があります。
評価の最後に、DCMはFrustum関数DCM\_update\_copy\_transformを呼び出して新しい変換を出力します。

なお、DCMがオフセット曲線についてアプリケーションに提供する情報は、コピー変換のみです。
アプリケーションは、曲線上の点を見つける責任があります（例えば、描画するために）が、これらは元の曲線と変換から簡単に見つけることができます。

コピー曲線が再生成されたパラメトリック曲線から作成された場合、依存関係の拘束はコピー曲線に重複してはいけません。

コピー曲線は、関数eraseを使用してDCMから削除されます。

DCM関数：[add\_copy\_g](16.3._Defining_the_model_data.md)

Frustum関数：[DCM\_copy\_transform](17.8._Frustum_functions_for_offset_and_copy_curves.md)

#### 11.2.1.1 曲線のコピーと曲線の拡張

コピーされた曲線には、曲線の拡張も含まれます（[7.5 曲線の拡張](7.5._Curve_extensions.md)）。
コピーされた曲線は、コピー元の曲線とその拡張を含む完全なコピーとなります。

曲線の拡張は、コピーされた曲線とは別に定義することはできず、もし親の曲線に拡張が存在する場合でも、DCMはそれを無視するように指示することはできません。

11.2.2 寸法と拘束をコピー曲線に適用する

コピー元に対してサポートされているすべての拘束は、コピー曲線にも適用できますが、以下の例外があります。

- 同じコピー元を持つ他の曲線に対して対称的な拘束。
- ロック拘束。

コピー曲線に対する寸法と拘束（ロック拘束を除く）は、楕円を含むすべてのルート曲線タイプに対してヘルプパラメータが必要です。
コピー曲線は、ルート曲線と同じパラメータ化を持ちます。
ヘルプパラメータは、すべてのコピー曲線に対して DCM\_dimension\_parameter Frustum 関数を介して問い合わせられます。

コピー元が楕円である場合、コピー曲線に対する寸法と拘束に対してヘルプポイントは問い合わせられません。なぜなら、ヘルプパラメータが必要だからです。
