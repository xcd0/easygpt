## 12.1 変数

以下の変数タイプがサポートされています：

- 寸法に関連付けられた変数。
モデルが解かれると、変数の値は図形上の測定寸法に設定されます。
- シンプルな変数、つまり寸法に関連付けられていない変数。
- 非線形方程式の中で、図形を直接変数として使用することができます。

ほとんどの値を持つ寸法は、変数寸法に変更することができます。
例外は、add\_v関数の説明に記載されています（セクション[16.4.1 add\_v - DCMで変数を作成する](16.4._DCM_functions_for_managing_equations.md)を参照）。
この自由を制限するために、方程式を使用して変数の値を制約することができます。
変数が追加された寸法はもはや剛体ではありません。
寸法が剛体として指定されているかどうかに関係なく、変数を追加することができますが、プロパティは上書きされます。
変数が追加されると、変数の剛性を問い合わせるための追加のフラスタム呼び出しは行われません。

通常、図形の位置は寸法と拘束条件を満たすために見つけられます。
ただし、方程式を解くためにも見つけることができます。
詳細は、セクション[16.4.4 add\_g\_to\_e - 非線形方程式に図形を追加する](16.4._DCM_functions_for_managing_equations.md)を参照してください。

変数は-1010から1010の範囲内である必要があります。これらの制限を超える値は、機械の精度の問題を避けるためにDCMによって解かれません。

DCM関数：add\_v、add\_v\_to\_e、value。

フラスタム関数：DCM\_variable\_new\_value。

### 12.1.1 変数の初期値

すべての変数は、非線形方程式における複数の解や、モデルが不完全な場合の解を区別するために、初期値を持つ必要があります。
非線形方程式を解く際、DCMは変数の初期値を解の出発点として使用します。

寸法に関連する変数の初期値は、寸法の測定値です。
単純な変数の場合、アプリケーションによって初期値を提供する必要があります。

方程式の導関数が変数の初期値で見つからない場合、DCMは解を見つけることができません。
例えば、方程式がxy - 1 = 0であり、xとyの初期値がどちらもゼロの場合、DCMは解を見つけることができません。
この方程式を解くためには、少なくとも変数のうちの1つにゼロ以外の初期値を持たせる必要があります。

フラスタム関数: [DCM\_variable\_start\_value](17.9._Frustum_functions_for_variables_and_equations.md)

### 12.1.2 変数角度の開始値

DCMは、変数角度寸法の開始値として、角度の現在値を測定して使用します。
デフォルトでは、測定された角度の値は0から2πの範囲になります。ただし、アプリケーションは異なる開始値を指定する機会を与えられます。
アプリケーションは、方程式で実際に必要な値と2πの倍数で測定された角度の値が異なる場合に、これを行う必要があります。

これは、2D DCMで方程式を持つギアを実装するために使用されることがあります。
アプリケーションが各ドラッグステップの間にundo_evaluationを呼び出す場合、現在の変数角度に2πの倍数が初期値から加算または減算されるため、ギアの角度値が特定の場所で「ジャンプ」する可能性があります。

アプリケーションは通常、評価の終わりでの角度値を覚えておき、undo_evaluationを呼び出す前に保持します。
次の評価では、Frustum関数DCM_variable_angle_valueが呼び出されると、保存された角度値が返されます。
この関数は、完全な評価時に呼び出され、さらなる完全な評価時にも呼び出されますが、増分評価時には呼び出されません。

Frustum関数: [DCM_variable_angle_value](17.9._Frustum_functions_for_variables_and_equations.md)

### 12.1.3 負の値の変数

Frustum関数DCM\_dimension\_valueが呼び出されたとき、通常の距離寸法に負の値を指定しても、解には影響しません。DCMは単純に絶対値を使用します。ただし、寸法にハーフスペースが割り当てられている場合は異なります（[4.1.2.5 符号付き距離と方向付き距離](4.1._Dimensions_with_a_value.md)を参照）。

しかし、変数寸法の場合、寸法のハーフスペースが設定されていない場合でも、距離寸法に負の値を取ることがあります。
例えば、モデルには、値がv1 + 10 = 0という方程式で与えられる変数寸法v1が含まれているかもしれません。これにより、v1の値は-10になります。これはアプリケーションでの複雑さを引き起こす可能性があり、したがって、変数距離寸法では符号付き距離を使用して、変数の符号の意味を明確に指定することが強く推奨されます。

変数寸法は、評価中に正から負（またはその逆）に変化する可能性があります。
モデルがスムーズに変化するようにするため、DCMは変数寸法の符号の変化はモデルのキラリティの変化を表すものと考えます。
したがって、点が直線に対する変数寸法を持ち、変数の値が+10から-10に変化する場合、期待される結果は、点が直線の片側からもう片側に移動することです。

アプリケーションが変数寸法のハーフスペースを設定していない場合、負の変数値に相当する位置から変数寸法を開始するために別のメカニズムが必要です。
そうしないと、寸法は各完全評価ごとにサイドをジャンプします。
これを防ぐために、フラスタム関数DCM\_variable\_dist\_start\_signは、各変数寸法の開始時に各完全評価で呼び出されます。
アプリケーションは、現在のキラリティが変数の正または負の値に対応している場合に戻ります。
この関数は、符号付き距離の場合は呼び出されません。なぜなら、その場合は符号をハーフスペースから決定できるからです。
同様に、変数パターン値寸法にはこの関数は必要ありません。なぜなら、これらは常に符号付きであるからです。

なお、これは変数半径寸法には影響しません。
変数半径寸法の値が負の場合、DCMは円を解くことができません。

フラスタム関数：[DCM\_variable\_dist\_start\_sign](17.9._Frustum_functions_for_variables_and_equations.md)
